<mat-sidenav-container class="vertical-flex-full-height" style="height:99%">
    <mat-sidenav #sidenav position="end" class="timeseries-selector-form">

        <app-tracking-timeseries-selector
            [request]="request"
            [metaData]="metaData"></app-tracking-timeseries-selector>

    </mat-sidenav>
    <mat-sidenav-content>
        <div class="mat-dialog-content">
            <div id="toolbar" style="justify-content:flex-end;">
                <!-- <mat-form-field style="width:1px;visibility:hidden;">
                    <input [value]="resetModel" matInput [matDatepicker]="picker" placeholder="Choose a date"
                        (dateChange)="dateChanged($event)" hidden />
                    <mat-datepicker-toggle matIconPrefix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker [dateClass]="dateClass"></mat-datepicker>
                </mat-form-field> -->
                <mat-form-field class="date-form">
                    <mat-label>Date Range</mat-label>
                    <mat-date-range-input [formGroup]="dateRange" [rangePicker]="datePicker">
                        <input matStartDate placeholder="Start date" formControlName="start" (dateChange)="dateChanged($event)">
                        <input matEndDate placeholder="End date" formControlName="end" (dateChange)="dateChanged($event)">
                    </mat-date-range-input>
                    <mat-datepicker-toggle matIconSuffix [for]="datePicker"></mat-datepicker-toggle>
                    <mat-date-range-picker #datePicker></mat-date-range-picker>
                </mat-form-field>
        
                <!-- <button mat-icon-button color="primary" aria-label="Choose Dates(s)" title="Choose date(s)"
                    (click)="picker.open()">
                    <mat-icon>calendar_month</mat-icon>
                </button>  -->

                <button style="float:right;" mat-icon-button color="primary" aria-label="Choose Timeseries"
                    title="Choose Timeseries" (click)="onShowTimeseriesSelector()">
                    <mat-icon>menu_open</mat-icon>
                </button>        
            </div>
        
            <div class="vertical-flex-full-height" style="padding:5px;">
                <app-tracking-historical-chart #chart
                    [request]="request"              
                    [startDate]="dateRange.value.start"   
                    [endDate]="dateRange.value.end"    
                    [historicalPlot]="historicalPlot$ | async"
                    [historicalPlotLoading]="historicalPlotLoading$ | async"
                    [historicalPlotLoaded]="historicalPlotLoaded$ | async"
                    [historicalPlotError]="historicalPlotError$ |  async"></app-tracking-historical-chart>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>
